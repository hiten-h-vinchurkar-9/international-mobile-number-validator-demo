import Head from 'next/head'
import { useEffect, useState } from 'react'

export default function Home() {
  const [countryCode, setCountryCode] = useState('AE')
  const [phoneNumber, setPhoneNumber] = useState('blank')
  const [showResult, setShowResult] = useState(false)
  const [resultData, setResultData] = useState('');
  return (
    <div className="flex flex-col items-center justify-center min-h-screen py-2 w-full h-screen bg-gradient-to-r from-zinc-500 via-red-500 to-yellow-500 bg-center bg-cover scroll-smooth">
      <Head>
        <title>Demo - International Mobile Validator</title>
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className="flex flex-col items-center justify-center w-full flex-1 sm:px-20 text-center my-20">
        <h1 className="text-4xl sm:text-6xl font-bold">International Mobile Validator</h1>
        <form className="w-full max-w-sm" onSubmit={async (e) => {
            e.preventDefault()
            try {
              const data = await fetch(`https://re1.uk/api/international-mobile-validator`,{
                body: '{"phoneNumber":"'+Buffer.from(phoneNumber).toString("base64")+'","countryCode":"'+Buffer.from(countryCode).toString("base64")+'"}',
                headers: {
                  'Content-Type':'application/json'
                },
                method: 'POST'
              })
              const result = await data.json();
              setResultData(JSON.stringify(result, undefined, 4));
            } catch (error) {
              alert(error.message)
            } finally {
              setShowResult(true);
            }
          }}>
          <div className="flex items-center border-b border-teal-500 py-2">
            <select className="block py-2.5 px-0 w-8 text-sm text-black bg-transparent border-none appearance-none" defaultValue={`AE`} onChange={(e) => {
              setCountryCode(e.target.value)
            }}>
                <option value="AF">+93&nbsp;&nbsp;Afghanistan</option><option value="AL">+355 Albania</option><option value="DZ">+213 Algeria</option><option value="AS">+1&nbsp;&nbsp;&nbsp;American Samoa</option><option value="AD">+376 Andorra</option><option value="AO">+244 Angola</option><option value="AI">+1&nbsp;&nbsp; Anguilla</option><option value="AG">+1&nbsp;&nbsp; Antigua and Barbuda</option><option value="AR">+54&nbsp;&nbsp;Argentina</option><option value="AM">+374 Armenia</option><option value="AW">+297 Aruba</option><option value="AU">+61&nbsp;&nbsp;Australia</option><option value="AT">+43&nbsp;&nbsp;Austria</option><option value="AZ">+994 Azerbaijan</option><option value="BS">+1&nbsp;&nbsp; Bahamas</option><option value="BH">+973 Bahrain</option><option value="BD">+880 Bangladesh</option><option value="BB">+1&nbsp;&nbsp; Barbados</option><option value="BY">+375 Belarus</option><option value="BE">+32&nbsp;&nbsp;Belgium</option><option value="BZ">+501 Belize</option><option value="BJ">+229 Benin</option><option value="BM">+1&nbsp;&nbsp; Bermuda</option><option value="BT">+975 Bhutan</option><option value="BO">+591 Bolivia</option><option value="BA">+387 Bosnia and Herzegovina</option><option value="BW">+267 Botswana</option><option value="BR">+55&nbsp;&nbsp;Brazil</option><option value="IO">+246 British Indian Ocean Territory</option><option value="VG">+1&nbsp;&nbsp; British Virgin Islands</option><option value="BN">+673 Brunei</option><option value="BG">+359 Bulgaria</option><option value="BF">+226 Burkina Faso</option><option value="BI">+257 Burundi</option><option value="KH">+855 Cambodia</option><option value="CM">+237 Cameroon</option><option value="CA">+1&nbsp;&nbsp; Canada</option><option value="CV">+238 Cape Verde</option><option value="BQ">+599 Caribbean Netherlands</option><option value="KY">+1&nbsp;&nbsp; Cayman Islands</option><option value="CF">+236 Central African Republic</option><option value="TD">+235 Chad</option><option value="CL">+56&nbsp;&nbsp;Chile</option><option value="CN">+86&nbsp;&nbsp;China</option><option value="CX">+61&nbsp;&nbsp;Christmas Island</option><option value="CC">+61&nbsp;&nbsp;Cocos Islands</option><option value="CO">+57&nbsp;&nbsp;Colombia</option><option value="KM">+269 Comoros</option><option value="CD">+243 Congo (DRC)</option><option value="CG">+242 Congo (Republic)</option><option value="CK">+682 Cook Islands</option><option value="CR">+506 Costa Rica</option><option value="CI">+225 Côte d’Ivoire</option><option value="HR">+385 Croatia</option><option value="CU">+53&nbsp;&nbsp;Cuba</option><option value="CW">+599 Curaçao</option><option value="CY">+357 Cyprus</option><option value="CZ">+420 Czech Republic</option><option value="DK">+45&nbsp;&nbsp;Denmark</option><option value="DJ">+253 Djibouti</option><option value="DM">+1&nbsp;&nbsp; Dominica</option><option value="DO">+1&nbsp;&nbsp; Dominican Republic</option><option value="EC">+593 Ecuador</option><option value="EG">+20&nbsp;&nbsp;Egypt</option><option value="SV">+503 El Salvador</option><option value="GQ">+240 Equatorial Guinea</option><option value="ER">+291 Eritrea</option><option value="EE">+372 Estonia</option><option value="ET">+251 Ethiopia</option><option value="FK">+500 Falkland Islands</option><option value="FO">+298 Faroe Islands</option><option value="FJ">+679 Fiji</option><option value="FI">+358 Finland</option><option value="FR">+33&nbsp;&nbsp;France</option><option value="GF">+594 French Guiana</option><option value="PF">+689 French Polynesia</option><option value="GA">+241 Gabon</option><option value="GM">+220 Gambia</option><option value="GE">+995 Georgia</option><option value="DE">+49&nbsp;&nbsp;Germany</option><option value="GH">+233 Ghana</option><option value="GI">+350 Gibraltar</option><option value="GR">+30&nbsp;&nbsp;Greece</option><option value="GL">+299 Greenland</option><option value="GD">+1&nbsp;&nbsp; Grenada</option><option value="GP">+590 Guadeloupe</option><option value="GU">+1&nbsp;&nbsp; Guam</option><option value="GT">+502 Guatemala</option><option value="GG">+44&nbsp;&nbsp;Guernsey</option><option value="GN">+224 Guinea</option><option value="GW">+245 Guinea-Bissau</option><option value="GY">+592 Guyana</option><option value="HT">+509 Haiti</option><option value="HN">+504 Honduras</option><option value="HK">+852 Hong Kong</option><option value="HU">+36&nbsp;&nbsp;Hungary</option><option value="IS">+354 Iceland</option><option value="IN">+91&nbsp;&nbsp;India</option><option value="ID">+62&nbsp;&nbsp;Indonesia</option><option value="IR">+98&nbsp;&nbsp;Iran</option><option value="IQ">+964 Iraq</option><option value="IE">+353 Ireland</option><option value="IM">+44&nbsp;&nbsp;Isle of Man</option><option value="IL">+972 Israel</option><option value="IT">+39&nbsp;&nbsp;Italy</option><option value="JM">+1&nbsp;&nbsp; Jamaica</option><option value="JP">+81&nbsp;&nbsp;Japan</option><option value="JE">+44&nbsp;&nbsp;Jersey</option><option value="JO">+962 Jordan</option><option value="KZ">+7&nbsp;&nbsp; Kazakhstan</option><option value="KE">+254 Kenya</option><option value="KI">+686 Kiribati</option><option value="XK">+383 Kosovo</option><option value="KW">+965 Kuwait</option><option value="KG">+996 Kyrgyzstan</option><option value="LA">+856 Laos</option><option value="LV">+371 Latvia </option><option value="LB">+961 Lebanon</option><option value="LS">+266 Lesotho</option><option value="LR">+231 Liberia</option><option value="LY">+218 Libya</option><option value="LI">+423 Liechtenstein</option><option value="LT">+370 Lithuania</option><option value="LU">+352 Luxembourg</option><option value="MO">+853 Macau</option><option value="MK">+389 Macedonia</option><option value="MG">+261 Madagascar</option><option value="MW">+265 Malawi</option><option value="MY">+60&nbsp;&nbsp;Malaysia</option><option value="MV">+960 Maldives</option><option value="ML">+223 Mali</option><option value="MT">+356 Malta</option><option value="MH">+692 Marshall Islands</option><option value="MQ">+596 Martinique</option><option value="MR">+222 Mauritania</option><option value="MU">+230 Mauritius</option><option value="YT">+262 Mayotte</option><option value="MX">+52&nbsp;&nbsp;Mexico</option><option value="FM">+691 Micronesia</option><option value="MD">+373 Moldova</option><option value="MC">+377 Monaco</option><option value="MN">+976 Mongolia</option><option value="ME">+382 Montenegro</option><option value="MS">+1&nbsp;&nbsp; Montserrat</option><option value="MA">+212 Morocco</option><option value="MZ">+258 Mozambique</option><option value="MM">+95&nbsp;&nbsp;Myanmar</option><option value="NA">+264 Namibia</option><option value="NR">+674 Nauru</option><option value="NP">+977 Nepal</option><option value="NL">+31&nbsp;&nbsp;Netherlands</option><option value="NC">+687 New Caledonia</option><option value="NZ">+64&nbsp;&nbsp;New Zealand</option><option value="NI">+505 Nicaragua</option><option value="NE">+227 Niger</option><option value="NG">+234 Nigeria</option><option value="NU">+683 Niue</option><option value="NF">+672 Norfolk Island</option><option value="KP">+850 North Korea</option><option value="MP">+1&nbsp;&nbsp; Northern Mariana Islands</option><option value="NO">+47&nbsp;&nbsp;Norway</option><option value="OM">+968 Oman</option><option value="PK">+92&nbsp;&nbsp;Pakistan</option><option value="PW">+680 Palau</option><option value="PS">+970 Palestine</option><option value="PA">+507 Panama</option><option value="PG">+675 Papua New Guinea</option><option value="PY">+595 Paraguay</option><option value="PE">+51&nbsp;&nbsp;Peru</option><option value="PH">+63&nbsp;&nbsp;Philippines</option><option value="PL">+48&nbsp;&nbsp;Poland</option><option value="PT">+351 Portugal</option><option value="PR">+1&nbsp;&nbsp; Puerto Rico</option><option value="QA">+974 Qatar</option><option value="RE">+262 Réunion</option><option value="RO">+40&nbsp;&nbsp;Romania</option><option value="RU">+7&nbsp;&nbsp; Russia</option><option value="RW">+250 Rwanda</option><option value="BL">+590 Saint Barthélemy</option><option value="SH">+290 Saint Helena</option><option value="KN">+1&nbsp;&nbsp; Saint Kitts and Nevis</option><option value="LC">+1&nbsp;&nbsp; Saint Lucia</option><option value="MF">+590 Saint Martin</option><option value="PM">+508 Saint Pierre and Miquelon</option><option value="VC">+1&nbsp;&nbsp; Saint Vincent and the Grenadines</option><option value="WS">+685 Samoa</option><option value="SM">+378 San Marino</option><option value="ST">+239 São Tomé and Príncipe</option><option value="SA">+966 Saudi Arabia</option><option value="SN">+221 Senegal</option><option value="RS">+381 Serbia</option><option value="SC">+248 Seychelles</option><option value="SL">+232 Sierra Leone</option><option value="SG">+65&nbsp;&nbsp;Singapore</option><option value="SX">+1&nbsp;&nbsp; Sint Maarten</option><option value="SK">+421 Slovakia</option><option value="SI">+386 Slovenia</option><option value="SB">+677 Solomon Islands</option><option value="SO">+252 Somalia</option><option value="ZA">+27&nbsp;&nbsp;South Africa</option><option value="KR">+82&nbsp;&nbsp;South Korea</option><option value="SS">+211 South Sudan</option><option value="ES">+34&nbsp;&nbsp;Spain</option><option value="LK">+94&nbsp;&nbsp;Sri Lanka</option><option value="SD">+249 Sudan</option><option value="SR">+597 Suriname</option><option value="SJ">+47&nbsp;&nbsp;Svalbard and Jan Mayen</option><option value="SZ">+268 Swaziland</option><option value="SE">+46&nbsp;&nbsp;Sweden</option><option value="CH">+41&nbsp;&nbsp;Switzerland</option><option value="SY">+963 Syria</option><option value="TW">+886 Taiwan</option><option value="TJ">+992 Tajikistan</option><option value="TZ">+255 Tanzania</option><option value="TH">+66&nbsp;&nbsp;Thailand</option><option value="TL">+670 Timor-Leste</option><option value="TG">+228 Togo</option><option value="TK">+690 Tokelau</option><option value="TO">+676 Tonga</option><option value="TT">+1&nbsp;&nbsp; Trinidad and Tobago</option><option value="TN">+216 Tunisia</option><option value="TR">+90&nbsp;&nbsp;Turkey</option><option value="TM">+993 Turkmenistan</option><option value="TC">+1&nbsp;&nbsp; Turks and Caicos Islands</option><option value="TV">+688 Tuvalu</option><option value="VI">+1&nbsp;&nbsp; U.S. Virgin Islands</option><option value="UG">+256 Uganda</option><option value="UA">+380 Ukraine</option><option value="AE">+971 United Arab Emirates</option><option value="GB">+44&nbsp;&nbsp;United Kingdom</option><option value="US">+1&nbsp;&nbsp; United States</option><option value="UY">+598 Uruguay</option><option value="UZ">+998 Uzbekistan</option><option value="VU">+678 Vanuatu</option><option value="VA">+39&nbsp;&nbsp;Vatican City</option><option value="VE">+58&nbsp;&nbsp;Venezuela</option><option value="VN">+84&nbsp;&nbsp;Vietnam</option><option value="WF">+681 Wallis and Futuna</option><option value="EH">+212 Western Sahara</option><option value="YE">+967 Yemen</option><option value="ZM">+260 Zambia</option><option value="ZW">+263 Zimbabwe</option><option value="AX">+358 Åland Islands</option>
            </select>
            <input className="appearance-none bg-transparent border-none w-full text-black placeholder-black mr-3 py-1 px-2 leading-tight focus:outline-none" type="text" placeholder="Enter Phone Number" required onInput={(e) => {
              setPhoneNumber(e.target.value)
            }} />
            <button className="flex-shrink-0 bg-teal-500 hover:bg-teal-700 border-teal-500 hover:border-teal-700 text-sm border-4 text-white py-1 px-2 rounded" type="submit">
              Validate!
            </button>
          </div>
        </form>
        

        <div className="w-full max-w-2xl py-10">
            {
              showResult ? <textarea value={resultData} cols="30" rows="10" readOnly /> : '' 
            }
        </div>
      </main>

      <footer className="fixed items-center justify-center w-full border-t p-5 bottom-0 bg-black/[.6]">
        <a
          className="flex items-center justify-center text-white italic"
          href="#"
          target="_blank"
          rel="noreferrer"
        >
            &#169; DESIGNED & DEVELOPED BY: HITEN
        </a>
      </footer>
    </div>
  )
}
